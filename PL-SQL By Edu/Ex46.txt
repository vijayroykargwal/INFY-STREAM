CREATE OR REPLACE PROCEDURE SP_ADD_COUNTRY(P_COUNTRY_ID COUNTRIES.COUNTRY_ID%TYPE,                                           
P_COUNTRY_NAME COUNTRIES.COUNTRY_NAME%TYPE,                                          
P_REGION_ID COUNTRIES.REGION_ID%TYPE,                                          
P_STATUS OUT PLS_INTEGER)
IS
V_COUNT_RID PLS_INTEGER;
V_COUNT_CID PLS_INTEGER;
BEGIN    
SELECT COUNT(*) INTO V_COUNT_RID FROM REGIONS WHERE REGION_ID = P_REGION_ID;    
IF V_COUNT_RID = 0 THEN        
P_STATUS := -1;    
ELSE        
SELECT COUNT(*) INTO V_COUNT_CID FROM COUNTRIES WHERE COUNTRY_ID = P_COUNTRY_ID;        
IF V_COUNT_CID != 0 THEN            
P_STATUS := -2;        
ELSE            
INSERT INTO COUNTRIES VALUES (P_COUNTRY_ID,P_COUNTRY_NAME,P_REGION_ID);            
P_STATUS := 0;        
END IF;    
END IF;
EXCEPTION
WHEN OTHERS THEN
P_STATUS := -3;
END; 
 
